"use strict";(self["webpackChunkinefi_cli"]=self["webpackChunkinefi_cli"]||[]).push([[665],{9193:function(e,a,t){t.d(a,{Z:function(){return r}});var s=t(6252);const i={class:"bigcard-component layout-content"};function n(e,a){return(0,s.wg)(),(0,s.iD)("div",i,[(0,s.WI)(e.$slots,"default")])}var l=t(3744);const o={},d=(0,l.Z)(o,[["render",n]]);var r=d},3665:function(e,a,t){t.r(a),t.d(a,{default:function(){return qe}});t(560);var s=t(6252),i=t(2262),n=t(9963),l=t(3577),o=t(5781),d=t(9193);const r={class:"py-3 px-4 d-flex align-items-center custom-btn"},u={class:"me-2"};var c={__name:"BtnComponent",props:{content:{type:String,default:""},iconClass:{type:String},iconSize:{type:String,default:"md"}},setup(e){return(a,t)=>{const i=(0,s.up)("font-awesome-icon");return(0,s.wg)(),(0,s.iD)("div",r,[(0,s._)("span",u,(0,l.zw)(e.content),1),(0,s.Wm)(i,{icon:e.iconClass,iconSize:e.iconSize},null,8,["icon","iconSize"])])}}},p=t(3744);const m=(0,p.Z)(c,[["__scopeId","data-v-03e0fd04"]]);var h=m,v={__name:"IconBtn",props:{iconClass:String,size:{type:String||null,default:"md"},active:{type:Boolean,default:!1}},setup(e){return(a,t)=>{const i=(0,s.up)("font-awesome-icon");return(0,s.wg)(),(0,s.iD)("button",{class:(0,l.C_)(["icon-btn",{active:e.active,[`icon-${e.size}`]:!0}])},[(0,s.Wm)(i,{icon:e.iconClass,size:"md"==e.size?null:e.size},null,8,["icon","size"])],2)}}};const f=(0,p.Z)(v,[["__scopeId","data-v-65511894"]]);var w=f,z=t(8180),g=t(149),_=t(5121);const x={name:"splitpanes",emits:["ready","resize","resized","pane-click","pane-maximize","pane-add","pane-remove","splitter-click"],props:{horizontal:{type:Boolean},pushOtherPanes:{type:Boolean,default:!0},dblClickSplitter:{type:Boolean,default:!0},rtl:{type:Boolean,default:!1},firstSplitter:{type:Boolean}},provide(){return{requestUpdate:this.requestUpdate,onPaneAdd:this.onPaneAdd,onPaneRemove:this.onPaneRemove,onPaneClick:this.onPaneClick}},data:()=>({container:null,ready:!1,panes:[],touch:{mouseDown:!1,dragging:!1,activeSplitter:null},splitterTaps:{splitter:null,timeoutId:null}}),computed:{panesCount(){return this.panes.length},indexedPanes(){return this.panes.reduce(((e,a)=>(e[a.id]=a)&&e),{})}},methods:{updatePaneComponents(){this.panes.forEach((e=>{e.update&&e.update({[this.horizontal?"height":"width"]:`${this.indexedPanes[e.id].size}%`})}))},bindEvents(){document.addEventListener("mousemove",this.onMouseMove,{passive:!1}),document.addEventListener("mouseup",this.onMouseUp),"ontouchstart"in window&&(document.addEventListener("touchmove",this.onMouseMove,{passive:!1}),document.addEventListener("touchend",this.onMouseUp))},unbindEvents(){document.removeEventListener("mousemove",this.onMouseMove,{passive:!1}),document.removeEventListener("mouseup",this.onMouseUp),"ontouchstart"in window&&(document.removeEventListener("touchmove",this.onMouseMove,{passive:!1}),document.removeEventListener("touchend",this.onMouseUp))},onMouseDown(e,a){this.bindEvents(),this.touch.mouseDown=!0,this.touch.activeSplitter=a},onMouseMove(e){this.touch.mouseDown&&(e.preventDefault(),this.touch.dragging=!0,this.calculatePanesSize(this.getCurrentMouseDrag(e)),this.$emit("resize",this.panes.map((e=>({min:e.min,max:e.max,size:e.size})))))},onMouseUp(){this.touch.dragging&&this.$emit("resized",this.panes.map((e=>({min:e.min,max:e.max,size:e.size})))),this.touch.mouseDown=!1,setTimeout((()=>{this.touch.dragging=!1,this.unbindEvents()}),100)},onSplitterClick(e,a){"ontouchstart"in window&&(e.preventDefault(),this.dblClickSplitter&&(this.splitterTaps.splitter===a?(clearTimeout(this.splitterTaps.timeoutId),this.splitterTaps.timeoutId=null,this.onSplitterDblClick(e,a),this.splitterTaps.splitter=null):(this.splitterTaps.splitter=a,this.splitterTaps.timeoutId=setTimeout((()=>{this.splitterTaps.splitter=null}),500)))),this.touch.dragging||this.$emit("splitter-click",this.panes[a])},onSplitterDblClick(e,a){let t=0;this.panes=this.panes.map(((e,s)=>(e.size=s===a?e.max:e.min,s!==a&&(t+=e.min),e))),this.panes[a].size-=t,this.$emit("pane-maximize",this.panes[a]),this.$emit("resized",this.panes.map((e=>({min:e.min,max:e.max,size:e.size}))))},onPaneClick(e,a){this.$emit("pane-click",this.indexedPanes[a])},getCurrentMouseDrag(e){const a=this.container.getBoundingClientRect(),{clientX:t,clientY:s}="ontouchstart"in window&&e.touches?e.touches[0]:e;return{x:t-a.left,y:s-a.top}},getCurrentDragPercentage(e){e=e[this.horizontal?"y":"x"];const a=this.container[this.horizontal?"clientHeight":"clientWidth"];return this.rtl&&!this.horizontal&&(e=a-e),100*e/a},calculatePanesSize(e){const a=this.touch.activeSplitter;let t={prevPanesSize:this.sumPrevPanesSize(a),nextPanesSize:this.sumNextPanesSize(a),prevReachedMinPanes:0,nextReachedMinPanes:0};const s=0+(this.pushOtherPanes?0:t.prevPanesSize),i=100-(this.pushOtherPanes?0:t.nextPanesSize),n=Math.max(Math.min(this.getCurrentDragPercentage(e),i),s);let l=[a,a+1],o=this.panes[l[0]]||null,d=this.panes[l[1]]||null;const r=o.max<100&&n>=o.max+t.prevPanesSize,u=d.max<100&&n<=100-(d.max+this.sumNextPanesSize(a+1));if(r||u)r?(o.size=o.max,d.size=Math.max(100-o.max-t.prevPanesSize-t.nextPanesSize,0)):(o.size=Math.max(100-d.max-t.prevPanesSize-this.sumNextPanesSize(a+1),0),d.size=d.max);else{if(this.pushOtherPanes){const e=this.doPushOtherPanes(t,n);if(!e)return;({sums:t,panesToResize:l}=e),o=this.panes[l[0]]||null,d=this.panes[l[1]]||null}null!==o&&(o.size=Math.min(Math.max(n-t.prevPanesSize-t.prevReachedMinPanes,o.min),o.max)),null!==d&&(d.size=Math.min(Math.max(100-n-t.nextPanesSize-t.nextReachedMinPanes,d.min),d.max))}},doPushOtherPanes(e,a){const t=this.touch.activeSplitter,s=[t,t+1];return a<e.prevPanesSize+this.panes[s[0]].min&&(s[0]=this.findPrevExpandedPane(t).index,e.prevReachedMinPanes=0,s[0]<t&&this.panes.forEach(((a,i)=>{i>s[0]&&i<=t&&(a.size=a.min,e.prevReachedMinPanes+=a.min)})),e.prevPanesSize=this.sumPrevPanesSize(s[0]),void 0===s[0])?(e.prevReachedMinPanes=0,this.panes[0].size=this.panes[0].min,this.panes.forEach(((a,s)=>{s>0&&s<=t&&(a.size=a.min,e.prevReachedMinPanes+=a.min)})),this.panes[s[1]].size=100-e.prevReachedMinPanes-this.panes[0].min-e.prevPanesSize-e.nextPanesSize,null):a>100-e.nextPanesSize-this.panes[s[1]].min&&(s[1]=this.findNextExpandedPane(t).index,e.nextReachedMinPanes=0,s[1]>t+1&&this.panes.forEach(((a,i)=>{i>t&&i<s[1]&&(a.size=a.min,e.nextReachedMinPanes+=a.min)})),e.nextPanesSize=this.sumNextPanesSize(s[1]-1),void 0===s[1])?(e.nextReachedMinPanes=0,this.panes[this.panesCount-1].size=this.panes[this.panesCount-1].min,this.panes.forEach(((a,s)=>{s<this.panesCount-1&&s>=t+1&&(a.size=a.min,e.nextReachedMinPanes+=a.min)})),this.panes[s[0]].size=100-e.prevPanesSize-e.nextReachedMinPanes-this.panes[this.panesCount-1].min-e.nextPanesSize,null):{sums:e,panesToResize:s}},sumPrevPanesSize(e){return this.panes.reduce(((a,t,s)=>a+(s<e?t.size:0)),0)},sumNextPanesSize(e){return this.panes.reduce(((a,t,s)=>a+(s>e+1?t.size:0)),0)},findPrevExpandedPane(e){return[...this.panes].reverse().find((a=>a.index<e&&a.size>a.min))||{}},findNextExpandedPane(e){return this.panes.find((a=>a.index>e+1&&a.size>a.min))||{}},checkSplitpanesNodes(){Array.from(this.container.children).forEach((e=>{const a=e.classList.contains("splitpanes__pane"),t=e.classList.contains("splitpanes__splitter");!a&&!t&&(e.parentNode.removeChild(e),console.warn("Splitpanes: Only <pane> elements are allowed at the root of <splitpanes>. One of your DOM nodes was removed."))}))},addSplitter(e,a,t=!1){const s=e-1,i=document.createElement("div");i.classList.add("splitpanes__splitter"),t||(i.onmousedown=e=>this.onMouseDown(e,s),typeof window<"u"&&"ontouchstart"in window&&(i.ontouchstart=e=>this.onMouseDown(e,s)),i.onclick=e=>this.onSplitterClick(e,s+1)),this.dblClickSplitter&&(i.ondblclick=e=>this.onSplitterDblClick(e,s+1)),a.parentNode.insertBefore(i,a)},removeSplitter(e){e.onmousedown=void 0,e.onclick=void 0,e.ondblclick=void 0,e.parentNode.removeChild(e)},redoSplitters(){const e=Array.from(this.container.children);e.forEach((e=>{e.className.includes("splitpanes__splitter")&&this.removeSplitter(e)}));let a=0;e.forEach((e=>{e.className.includes("splitpanes__pane")&&(!a&&this.firstSplitter?this.addSplitter(a,e,!0):a&&this.addSplitter(a,e),a++)}))},requestUpdate({target:e,...a}){const t=this.indexedPanes[e._.uid];Object.entries(a).forEach((([e,a])=>t[e]=a))},onPaneAdd(e){let a=-1;Array.from(e.$el.parentNode.children).some((t=>(t.className.includes("splitpanes__pane")&&a++,t===e.$el)));const t=parseFloat(e.minSize),s=parseFloat(e.maxSize);this.panes.splice(a,0,{id:e._.uid,index:a,min:isNaN(t)?0:t,max:isNaN(s)?100:s,size:null===e.size?null:parseFloat(e.size),givenSize:e.size,update:e.update}),this.panes.forEach(((e,a)=>e.index=a)),this.ready&&this.$nextTick((()=>{this.redoSplitters(),this.resetPaneSizes({addedPane:this.panes[a]}),this.$emit("pane-add",{index:a,panes:this.panes.map((e=>({min:e.min,max:e.max,size:e.size})))})}))},onPaneRemove(e){const a=this.panes.findIndex((a=>a.id===e._.uid)),t=this.panes.splice(a,1)[0];this.panes.forEach(((e,a)=>e.index=a)),this.$nextTick((()=>{this.redoSplitters(),this.resetPaneSizes({removedPane:{...t,index:a}}),this.$emit("pane-remove",{removed:t,panes:this.panes.map((e=>({min:e.min,max:e.max,size:e.size})))})}))},resetPaneSizes(e={}){e.addedPane||e.removedPane?this.panes.some((e=>null!==e.givenSize||e.min||e.max<100))?this.equalizeAfterAddOrRemove(e):this.equalize():this.initialPanesSizing(),this.ready&&this.$emit("resized",this.panes.map((e=>({min:e.min,max:e.max,size:e.size}))))},equalize(){const e=100/this.panesCount;let a=0;const t=[],s=[];this.panes.forEach((i=>{i.size=Math.max(Math.min(e,i.max),i.min),a-=i.size,i.size>=i.max&&t.push(i.id),i.size<=i.min&&s.push(i.id)})),a>.1&&this.readjustSizes(a,t,s)},initialPanesSizing(){let e=100;const a=[],t=[];let s=0;this.panes.forEach((i=>{e-=i.size,null!==i.size&&s++,i.size>=i.max&&a.push(i.id),i.size<=i.min&&t.push(i.id)}));let i=100;e>.1&&(this.panes.forEach((a=>{null===a.size&&(a.size=Math.max(Math.min(e/(this.panesCount-s),a.max),a.min)),i-=a.size})),i>.1&&this.readjustSizes(e,a,t))},equalizeAfterAddOrRemove({addedPane:e,removedPane:a}={}){let t=100/this.panesCount,s=0;const i=[],n=[];e&&null!==e.givenSize&&(t=(100-e.givenSize)/(this.panesCount-1)),this.panes.forEach((e=>{s-=e.size,e.size>=e.max&&i.push(e.id),e.size<=e.min&&n.push(e.id)})),!(Math.abs(s)<.1)&&(this.panes.forEach((a=>{e&&null!==e.givenSize&&e.id===a.id||(a.size=Math.max(Math.min(t,a.max),a.min)),s-=a.size,a.size>=a.max&&i.push(a.id),a.size<=a.min&&n.push(a.id)})),s>.1&&this.readjustSizes(s,i,n))},readjustSizes(e,a,t){let s;s=e>0?e/(this.panesCount-a.length):e/(this.panesCount-t.length),this.panes.forEach(((i,n)=>{if(e>0&&!a.includes(i.id)){const a=Math.max(Math.min(i.size+s,i.max),i.min),t=a-i.size;e-=t,i.size=a}else if(!t.includes(i.id)){const a=Math.max(Math.min(i.size+s,i.max),i.min),t=a-i.size;e-=t,i.size=a}i.update({[this.horizontal?"height":"width"]:`${this.indexedPanes[i.id].size}%`})})),Math.abs(e)>.1&&this.$nextTick((()=>{this.ready&&console.warn("Splitpanes: Could not resize panes correctly due to their constraints.")}))}},watch:{panes:{deep:!0,immediate:!1,handler(){this.updatePaneComponents()}},horizontal(){this.updatePaneComponents()},firstSplitter(){this.redoSplitters()},dblClickSplitter(e){[...this.container.querySelectorAll(".splitpanes__splitter")].forEach(((a,t)=>{a.ondblclick=e?e=>this.onSplitterDblClick(e,t):void 0}))}},beforeUnmount(){this.ready=!1},mounted(){this.container=this.$refs.container,this.checkSplitpanesNodes(),this.redoSplitters(),this.resetPaneSizes(),this.$emit("ready"),this.ready=!0},render(){return(0,s.h)("div",{ref:"container",class:["splitpanes","splitpanes--"+(this.horizontal?"horizontal":"vertical"),{"splitpanes--dragging":this.touch.dragging}]},this.$slots.default())}},S=(e,a)=>{const t=e.__vccOpts||e;for(const[s,i]of a)t[s]=i;return t},b={name:"pane",inject:["requestUpdate","onPaneAdd","onPaneRemove","onPaneClick"],props:{size:{type:[Number,String],default:null},minSize:{type:[Number,String],default:0},maxSize:{type:[Number,String],default:100}},data:()=>({style:{}}),mounted(){this.onPaneAdd(this)},beforeUnmount(){this.onPaneRemove(this)},methods:{update(e){this.style=e}},computed:{sizeNumber(){return this.size||0===this.size?parseFloat(this.size):null},minSizeNumber(){return parseFloat(this.minSize)},maxSizeNumber(){return parseFloat(this.maxSize)}},watch:{sizeNumber(e){this.requestUpdate({target:this,size:e})},minSizeNumber(e){this.requestUpdate({target:this,min:e})},maxSizeNumber(e){this.requestUpdate({target:this,max:e})}}};function k(e,a,t,i,n,o){return(0,s.wg)(),(0,s.iD)("div",{class:"splitpanes__pane",onClick:a[0]||(a[0]=a=>o.onPaneClick(a,e._.uid)),style:(0,l.j5)(e.style)},[(0,s.WI)(e.$slots,"default")],4)}const y=S(b,[["render",k]]);var C=t(7299),P=t(1348);const N={class:"layout-content"},M={class:"group_function_bar d-flex align-items-center mb-sm-3 px-3 py-1 p-sm-0"},W={class:"bread_crumb d-flex align-items-center d-sm-none"},E=["onClick"],D={class:"order-sm-3 d-flex justify-content-end align-items-center"},I={class:"layout-content overflow-auto",style:{"max-height":"50vh"}},U={key:0,class:"p-4 text-center"},G={key:1,class:"list-unstyled m-0"},R=["onClick"],T={class:"me-2"},A={class:"active"},H={class:"m-0"},L={class:"fs-7"},$={key:1,class:"highLight"},q={class:"action-btn order-sm-1 felx-shirnk-0 me-sm-3"},j={class:"d-none d-sm-block"},V={class:"d-block d-sm-none"},F=(0,s._)("span",null,"Create New Group",-1),O=(0,s._)("span",null,"Add Device",-1),B=(0,s._)("span",null,"Rename Group",-1),K=(0,s._)("span",null,"Remove Group",-1),Y=(0,s._)("span",{class:"fs-4"},"Add Device",-1),Z={class:"layout-content addDevice_dialog-body"},J={class:"adddevice-searchbar row px-4"},Q={class:"col-6 col-sm-8"},X={class:"fw-bold"},ee={class:"col-6 col-sm-4"},ae={class:"d-flex align-items-center"},te={class:"custom-tabs mb-2"},se=["onClick"],ie={class:"me-2"},ne={class:"adddevice-tab__number py-2 px-1"},le={class:"device-result w-100 py-2 px-3 layout-content"},oe=["onClick"],de=["onClick"],re={class:"layout-content"},ue={class:"d-none d-sm-flex p-2 border-b align-items-center"},ce={class:"ms-2"},pe=["onClick"],me={class:"layout-content"},he={class:"layout-content"},ve={class:"list-refresh border-b px-3 d-sm-none d-flex justify-content-end"},fe=(0,s._)("div",{class:"row p-3 border-b d-none d-sm-flex"},[(0,s._)("div",{class:"col-6"},[(0,s._)("span",null,"群組名稱")]),(0,s._)("div",{class:"col-6"},[(0,s._)("span",null,"環境設定")])],-1),we={class:"layout-content"},ze={class:"p-0"},ge=["onClick"],_e={class:"col-12 col-sm-6 d-flex align-items-center ps-4"},xe={class:"ms-2 p-sm-0"},Se={class:"active"},be={class:"d-sm-none d-flex align-items-end"},ke={class:"fs-7"},ye={key:0,class:"fs-7"},Ce={key:0,class:"col-sm-6 d-none d-sm-block"},Pe={key:0,class:"d-flex p-3 justify-content-center"},Ne={class:"layout-content"},Me={key:0,class:"header border-b p-3 d-flex align-items-center justify-content-between"},We={class:"operate d-flex align-items-center flex-grow-1"},Ee=(0,s._)("span",{class:"ms-2"},"移動",-1),De=(0,s._)("span",{class:"ms-2"},"刪除",-1),Ie={class:"layout-content"},Ue={class:"d-flex w-100 align-items-center justify-content-center"},Ge=["id","onDblclick","onTouchstartPassive"],Re={class:"alias_name"},Te={class:"alias_input"},Ae=(0,s._)("div",{class:"dot me-2"},null,-1),He=800;var Le={__name:"GroupView",setup(e){const a=(0,i.iH)(""),t=(0,i.iH)(""),r=(0,i.iH)(!1),u=(0,i.iH)(!1),c=(0,i.iH)(!1),p=(0,i.iH)([]),m=(0,s.f3)("prefixURL");let v=`${m}/data/group_tree.json`;const f=async()=>{try{const e=await _.Z.get(v);let a=e.data;p.value=[...S(a.result)]}catch(e){console.log(e)}};function S(e){return e.forEach((e=>{e.slaveGroupName=e.masterGroupName,e.slaveGroupUUID=e.masterGroupUUID,e.slaveGroupId=e.masterGroupId})),e}(0,s.bv)((()=>{f()}));const b=(0,i.qj)({label:"slaveGroupName",children:"subgroup"}),k=(0,i.iH)(),Le=(0,i.iH)();let $e=C.Z.state.groupHealth.checkSlaveGroup;setTimeout((()=>{if(""!==$e){let e=k.value.getNode($e.slaveGroupId);e?Oe(e):(0,P.z8)({message:`找不到群組${e.data.slaveGroupName}`,type:"warning"})}}),1),setTimeout((()=>{c.value=!1}),10);const qe=(0,i.qj)([]),je=(0,i.qj)([]),Ve=(0,i.iH)([]),Fe=(0,i.iH)({});function Oe(e,a=""){qe.length=0,Ye(),"mobile"===a&&(e=k.value.getNode(e.data.slaveGroupId));let t=!1;if(e.nodeSlaveGroupId)e=k.value.getNode(e.nodeSlaveGroupId);else if(e.device){t=!0,Ve.value=[e.device];let a=e.breadCrumb[e.breadCrumb.length-1].slaveGroupId;e=k.value.getNode(a)}function s(e){let a=e.parent;qe.push(e),0===a.level?qe.reverse():s(a)}function i(e){je.length=0,e.childNodes.length&&e.childNodes.forEach((e=>{je.push(e)})),e.data.devices&&!t&&(Ve.value=e.data.devices)}function n(e){0!==e.level&&(e.parent.expanded=!0,n(e.parent))}s(e),i(e),""===a&&Ca.value<576&&(e=Le.value.getNode(e.data.slaveGroupId)),n(e),Fe.value=e.data,Je()}const Be=(0,i.iH)([]);function Ke(e,s=[]){let i=[];if(Array.isArray(e)&&e.forEach((e=>{if("device"===a.value){let a={breadCrumb:[...s,e]};if(e.devices){const s=e.devices.filter((e=>e.deviceName.toLowerCase().includes(t.value.toLowerCase())));if(s.length){let e=[];s.forEach((t=>{let s={breadCrumb:[]};s.breadCrumb=a.breadCrumb,s.device=t,e.push(s)})),i.push(...e)}}if(e.subgroup){const t=Ke(e.subgroup,a.breadCrumb);i.push(...t)}}else{let a={breadCrumb:[...s,e]};if(e.slaveGroupName.toLowerCase().includes(t.value.toLowerCase())&&(a.nodeSlaveGroupId=e.slaveGroupId,i.push(a)),e.subgroup){const t=Ke(e.subgroup,a.breadCrumb);i.push(...t)}}})),s.length>0)return i;Be.value=i}function Ye(){Be.value=[],t.value="",Ve.value=[],Fe.value={}}const Ze=(0,i.iH)();function Je(){(0,s.Y3)((()=>{let e=Ze.value.wrapRef.scrollWidth,a=Ze.value.wrapRef.clientWidth,t=e-a;Ze.value.scrollTo({left:t})}))}let Qe=[{columnName:"Status",dataKey:"healthStatus",slotName:"status",width:10,minWidth:"80px"},{columnName:"Device Name",dataKey:"deviceName",width:30,minWidth:"200px"},{columnName:"Label",dataKey:"aliasName",slotName:"label",width:25,minWidth:"150px"},{columnName:"SN",dataKey:"sn",width:20,minWidth:"140px"},{columnName:"Mac Addr",dataKey:"macAddress",width:20,minWidth:"140px"},{columnName:"Enrolled Status",dataKey:"deviceState",slotName:"enroll",width:20,minWidth:"130px"}],Xe=[{dataKey:"healthStatus",typeName:"Status",options:[{value:"GOOD",valName:"Good"},{value:"WARNING",valName:"Warning"},{value:"ERROR",valName:"Error"},{value:"UNKNOWN",valName:"Unknown"}]}];const ea=(0,i.iH)("Double click to edit.");let aa=[{tab:"MAIN",except:["SN","Mac Addr"]},{tab:"UNASSIGNED",except:["SN","Mac Addr"]},{tab:"INACTIVE",except:["Status"]}];const ta=(0,s.Fl)((()=>qe.length?qe[0].data.slaveGroupName:"MAIN"));function sa(e){console.log(e)}const ia=(0,i.iH)([]),na=(0,i.iH)();function la(){ia.value=na.value.getCheckedData()}function oa(e,a){let t=document.getElementById(a),s=document.querySelectorAll(".label");s.forEach((e=>{e.classList.remove("can_edit")})),"click"===e&&t.classList.add("can_edit")}const da=(0,i.iH)(null);function ra(e){ua(),(0,s.YP)(da,(a=>{"longpress"===a&&oa("click",e)}))}function ua(){da.value=setTimeout((()=>{da.value="longpress"}),He)}function ca(){clearTimeout(da.value),da.value=null}(0,s.YP)(Fe,(()=>{na.value.clearChecked()}),{deep:!0});const pa=(0,i.iH)(!1),ma=(0,i.iH)(""),ha=(0,i.iH)(0),va=(0,s.Fl)((()=>ga[ha.value].name)),fa=(0,i.iH)([]),wa=(0,i.iH)([]),za=(0,s.Fl)((()=>0==fa.value.length&&0==wa.value.length)),ga=(0,i.qj)([{name:"UNASSIGNED",addAmount:(0,s.Fl)((()=>fa.value.length))},{name:"INACTIVE",addAmount:(0,s.Fl)((()=>wa.value.length))}]),_a=(0,i.iH)([]),xa=(0,i.iH)();function Sa(e){0==ha.value?fa.value=e:1==ha.value&&(wa.value=e)}function ba(e=[]){let a=[];e.length>0&&(a=e.find((e=>e.slaveGroupName===va.value))),a.devices&&(a=a.devices),_a.value=a}(0,s.YP)(p,(e=>{ba(e)})),(0,s.YP)(ha,(()=>{ba(p.value)})),(0,s.YP)(pa,(e=>{e||setTimeout((()=>{xa.value.clearChecked()}),500)}),{deewp:!0});let ka=[{columnName:"Device Name",dataKey:"deviceName",width:50},{columnName:"Label",dataKey:"aliasName",width:50}];const ya=(0,i.iH)(!1);setTimeout((()=>{ya.value=!0}),1e3);const Ca=(0,i.iH)(window.innerWidth),Pa=(0,i.iH)(576);function Na(){Ca.value=window.innerWidth,Ma()}function Ma(){qe.length=0,je.length=0,Ca.value<Pa.value&&p.value.forEach((e=>{let a=k.value.getNode(e.slaveGroupId);je.push(a)}))}window.addEventListener("resize",Na),setTimeout(Na,1),(0,s.Jd)((()=>{window.removeEventListener("resize",Na)}));const Wa=(0,i.iH)(400);return(0,s.YP)(Ca,(()=>{Ca.value<Pa.value&&(Wa.value=Ca.value-20)})),(e,m)=>{const v=(0,s.up)("el-breadcrumb-item"),f=(0,s.up)("el-breadcrumb"),_=(0,s.up)("el-scrollbar"),S=(0,s.up)("el-option"),C=(0,s.up)("el-select"),P=(0,s.up)("el-input"),He=(0,s.up)("font-awesome-icon"),$e=(0,s.up)("el-popover"),Ye=(0,s.up)("el-dropdown-item"),Je=(0,s.up)("el-dropdown-menu"),da=(0,s.up)("el-dropdown"),ua=(0,s.up)("el-button"),fa=(0,s.up)("el-dialog"),wa=(0,s.up)("el-tree"),ba=(0,s.up)("el-drawer"),Ca=(0,s.Q2)("loading");return(0,s.wg)(),(0,s.iD)("div",N,[(0,s._)("div",M,[(0,s.wy)((0,s.Wm)(_,{class:"d-sm-none",ref_key:"breadCrumbScrollbar",ref:Ze},{default:(0,s.w5)((()=>[(0,s._)("div",W,[(0,s.Wm)(w,{iconClass:"fa-solid fa-house",onClick:Ma}),(0,s.Wm)(f,{"separator-icon":(0,i.SU)(o.ArrowRight),class:"ms-2"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(qe,(e=>((0,s.wg)(),(0,s.j4)(v,{key:`path-${e}`},{default:(0,s.w5)((()=>[(0,s._)("a",{href:"",class:"text-nowrap",onClick:(0,n.iM)((a=>Oe(e)),["prevent"])},(0,l.zw)(e.data.slaveGroupName),9,E)])),_:2},1024)))),128))])),_:1},8,["separator-icon"])])])),_:1},512),[[n.F8,!u.value]]),(0,s.Wm)(z.Z,{iconClass:"fa-solid fa-arrows-rotate",class:"order-sm-2 ms-sm-auto d-none d-sm-block"}),(0,s._)("div",D,[(0,s.wy)((0,s.Wm)(w,{class:"d-sm-none",iconClass:"fa-solid fa-magnifying-glass",onClick:m[0]||(m[0]=e=>u.value=!0)},null,512),[[n.F8,!u.value]]),(0,s.wy)((0,s.Wm)(w,{class:"d-sm-none",iconClass:"fa-solid fa-xmark",onClick:m[1]||(m[1]=e=>u.value=!1)},null,512),[[n.F8,u.value]]),(0,s._)("div",{class:(0,l.C_)(["search-input ms-sm-3",{open:u.value}])},[(0,s.Wm)($e,{width:Wa.value,visible:r.value&&""!==t.value,"popper-class":"search_result"},{reference:(0,s.w5)((()=>[(0,s.Wm)(P,{modelValue:t.value,"onUpdate:modelValue":m[4]||(m[4]=e=>t.value=e),size:"large",placeholder:"Please Input","prefix-icon":(0,i.SU)(o.Search),onInput:m[5]||(m[5]=e=>Ke(p.value)),onFocus:m[6]||(m[6]=e=>r.value=!0),onBlur:m[7]||(m[7]=e=>r.value=!1)},{prepend:(0,s.w5)((()=>[(0,s.Wm)(C,{modelValue:a.value,"onUpdate:modelValue":m[2]||(m[2]=e=>a.value=e),placeholder:"群組",style:{width:"115px"},onChange:m[3]||(m[3]=e=>{Be.value=[],t.value=""}),size:"large"},{default:(0,s.w5)((()=>[(0,s.Wm)(S,{label:"群組",value:"group"}),(0,s.Wm)(S,{label:"裝置",value:"device"})])),_:1},8,["modelValue"])])),_:1},8,["modelValue","prefix-icon"])])),default:(0,s.w5)((()=>[(0,s._)("div",I,[0==Be.value.length?((0,s.wg)(),(0,s.iD)("div",U," 查無資料 ")):(0,s.kq)("",!0),Be.value.length>0?((0,s.wg)(),(0,s.iD)("ul",G,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(Be.value,((e,t)=>((0,s.wg)(),(0,s.iD)("li",{key:t,class:"px-2"},[(0,s._)("a",{href:"",class:"py-3 border-b d-flex align-items-center",onClick:(0,n.iM)((a=>{Oe(e),u.value=!1}),["prevent"])},["device"!==a.value?((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[(0,s._)("span",T,[(0,s.Wm)(He,{icon:"fa-solid fa-folder",class:"active",size:"lg"})]),(0,s._)("div",null,[(0,s._)("span",A,(0,l.zw)(e.breadCrumb[e.breadCrumb.length-1].slaveGroupName),1),(0,s._)("p",H,[(0,s.Wm)(f,{"separator-icon":(0,i.SU)(o.ArrowRight)},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.breadCrumb,(e=>((0,s.wg)(),(0,s.j4)(v,{key:e.slaveGroupId},{default:(0,s.w5)((()=>[(0,s._)("span",L,(0,l.zw)(e.slaveGroupName),1)])),_:2},1024)))),128))])),_:2},1032,["separator-icon"])])])],64)):"device"===a.value?((0,s.wg)(),(0,s.iD)("span",$,(0,l.zw)(e.device.deviceName),1)):(0,s.kq)("",!0)],8,R)])))),128))])):(0,s.kq)("",!0)])])),_:1},8,["width","visible"])],2)]),(0,s._)("div",q,[(0,s.Wm)(da,{trigger:"click",placement:"bottom-start"},{dropdown:(0,s.w5)((()=>[(0,s.Wm)(Je,null,{default:(0,s.w5)((()=>[(0,s.Wm)(Ye,{icon:(0,i.SU)(o.FolderAdd)},{default:(0,s.w5)((()=>[F])),_:1},8,["icon"]),(0,s.Wm)(Ye,{icon:(0,i.SU)(o.Plus),onClick:m[8]||(m[8]=e=>pa.value=!0)},{default:(0,s.w5)((()=>[O])),_:1},8,["icon"]),(0,s.Wm)(Ye,{icon:(0,i.SU)(o.EditPen),divided:""},{default:(0,s.w5)((()=>[B])),_:1},8,["icon"]),(0,s.Wm)(Ye,{icon:(0,i.SU)(o.Delete)},{default:(0,s.w5)((()=>[K])),_:1},8,["icon"])])),_:1})])),default:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s._)("div",j,[(0,s.Wm)(h,{content:"Action",iconClass:"fa-solid fa-caret-right",iconSize:"lg"})]),(0,s._)("div",V,[(0,s.Wm)(w,{iconClass:"fa-solid fa-ellipsis-vertical"})])])])),_:1}),(0,s.Wm)(fa,{modelValue:pa.value,"onUpdate:modelValue":m[13]||(m[13]=e=>pa.value=e),top:"5vh",width:"60%",class:"pop_dialog","show-close":!1},{header:(0,s.w5)((()=>[Y])),footer:(0,s.w5)((()=>[(0,s.Wm)(ua,{onClick:m[11]||(m[11]=e=>pa.value=!1)},{default:(0,s.w5)((()=>[(0,s.Uk)("Cancel")])),_:1}),(0,s.Wm)(ua,{class:"ms-3",type:za.value?"info":"primary",onClick:m[12]||(m[12]=e=>pa.value=!1),disabled:za.value},{default:(0,s.w5)((()=>[(0,s.Uk)(" Go ")])),_:1},8,["type","disabled"])])),default:(0,s.w5)((()=>[(0,s._)("div",Z,[(0,s._)("div",J,[(0,s._)("div",Q,[(0,s._)("p",null,[(0,s.Uk)("Select device and add to "),(0,s._)("span",X,(0,l.zw)(Fe.value.slaveGroupName),1)])]),(0,s._)("div",ee,[(0,s._)("div",ae,[(0,s.Wm)(He,{icon:"fa-solid fa-magnifying-glass"}),(0,s.Wm)(P,{class:"ms-3",modelValue:ma.value,"onUpdate:modelValue":m[9]||(m[9]=e=>ma.value=e),placeholder:"Search"},null,8,["modelValue"])])])]),(0,s._)("ul",te,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(ga,((e,a)=>((0,s.wg)(),(0,s.iD)("li",{class:(0,l.C_)(["custom-tab",{active:ha.value==a}]),key:a,onClick:e=>ha.value=a},[(0,s._)("span",ie,(0,l.zw)(e.name),1),(0,s._)("span",ne,(0,l.zw)(e.addAmount),1)],10,se)))),128))]),(0,s._)("div",le,[(0,s.Wm)(g.Z,{ref_key:"deviceTable",ref:xa,"item-size":54,"table-props":(0,i.SU)(ka),items:_a.value,showCheckBox:!0,searchShow:!1,"key-field":"deviceId",tooltipModel:pa.value,searchText:ma.value,onClearSearch:m[10]||(m[10]=e=>ma.value=""),onHaveCheckedData:Sa,activeTab:va.value},null,8,["table-props","items","tooltipModel","searchText","activeTab"])])])])),_:1},8,["modelValue"])])]),(0,s.wy)(((0,s.wg)(),(0,s.j4)(d.Z,{class:"flex-row","element-loading-background":"#fff"},{default:(0,s.w5)((()=>[(0,s.Wm)(ba,{modelValue:c.value,"onUpdate:modelValue":m[14]||(m[14]=e=>c.value=e),direction:"btt","show-close":!1,"with-header":!1,class:"tree_drawer px-3","modal-class":"tree_drawer_overlay",size:"80%"},{default:(0,s.w5)((()=>[(0,s.Wm)(_,{class:"py-3 ps-2"},{default:(0,s.w5)((()=>[(0,s.Wm)(wa,{data:p.value,props:b,ref_key:"treeRefMobile",ref:Le,"highlight-current":!0,"expand-on-click-node":!1,"check-on-click-node":!0,"node-key":"slaveGroupId"},{default:(0,s.w5)((({node:e})=>[(0,s._)("label",{class:"d-flex align-items-center w-100",onClick:a=>{Oe(e,"mobile"),c.value=!1}},[(0,s.wy)((0,s.Wm)(He,{icon:"fa-solid fa-folder"},null,512),[[n.F8,!e.expanded]]),(0,s.wy)((0,s.Wm)(He,{icon:"fa-solid fa-folder-open"},null,512),[[n.F8,e.expanded]]),(0,s._)("span",{class:(0,l.C_)(["ms-2",{highLight:Fe.value.slaveGroupId===e.data.slaveGroupId}])},(0,l.zw)(e.label),3)],8,oe)])),_:1},8,["data","props"])])),_:1})])),_:1},8,["modelValue"]),(0,s.Wm)((0,i.SU)(x),null,{default:(0,s.w5)((()=>[(0,s.Wm)((0,i.SU)(y),{class:"d-none d-sm-block","min-size":"20","max-size":"35"},{default:(0,s.w5)((()=>[(0,s.Wm)(_,{class:"py-3 ps-2"},{default:(0,s.w5)((()=>[(0,s.Wm)(wa,{data:p.value,props:b,ref_key:"treeRef",ref:k,"highlight-current":!0,"expand-on-click-node":!1,"check-on-click-node":!0,"node-key":"slaveGroupId"},{default:(0,s.w5)((({node:e})=>[(0,s._)("label",{class:"d-flex align-items-center w-100",onClick:a=>Oe(e)},[(0,s.wy)((0,s.Wm)(He,{icon:"fa-solid fa-folder"},null,512),[[n.F8,!e.expanded]]),(0,s.wy)((0,s.Wm)(He,{icon:"fa-solid fa-folder-open"},null,512),[[n.F8,e.expanded]]),(0,s._)("span",{class:(0,l.C_)(["ms-2",{highLight:Fe.value.slaveGroupId===e.data.slaveGroupId}])},(0,l.zw)(e.label),3)],8,de)])),_:1},8,["data","props"])])),_:1})])),_:1}),(0,s.Wm)((0,i.SU)(y),null,{default:(0,s.w5)((()=>[(0,s._)("div",re,[(0,s._)("div",ue,[(0,s.Wm)(w,{iconClass:"fa-solid fa-house"}),(0,s._)("div",ce,[(0,s.Wm)(f,{"separator-icon":(0,i.SU)(o.ArrowRight)},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(qe,(e=>((0,s.wg)(),(0,s.j4)(v,{key:`path-${e}`},{default:(0,s.w5)((()=>[(0,s._)("a",{href:"",onClick:(0,n.iM)((a=>Oe(e)),["prevent"])},(0,l.zw)(e.data.slaveGroupName),9,pe)])),_:2},1024)))),128))])),_:1},8,["separator-icon"])])]),(0,s._)("div",me,[(0,s.Wm)((0,i.SU)(x),{horizontal:""},{default:(0,s.w5)((()=>["MAIN"==ta.value?((0,s.wg)(),(0,s.j4)((0,i.SU)(y),{key:0},{default:(0,s.w5)((()=>[(0,s._)("div",he,[(0,s._)("div",ve,[(0,s.Wm)(w,{iconClass:"fa-solid fa-list",active:"",onClick:m[15]||(m[15]=e=>c.value=!0)}),(0,s.Wm)(w,{iconClass:"fa-solid fa-refresh",active:""})]),fe,(0,s._)("div",we,[(0,s.Wm)(_,{"max-height":"100%"},{default:(0,s.w5)((()=>[(0,s._)("ul",ze,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(je,((e,a)=>((0,s.wg)(),(0,s.iD)("li",{class:"row border-b py-2 py-sm-3 p-sm-2",key:a,onClick:a=>Oe(e)},[(0,s._)("div",_e,[(0,s.Wm)(He,{class:"active",icon:"fa-solid fa-folder",size:"2xl"}),(0,s._)("div",xe,[(0,s._)("span",Se,(0,l.zw)(e.data.slaveGroupName),1),(0,s._)("div",be,[(0,s._)("span",ke,[(0,s.Uk)(" 環境設定: "),e.data.profiles?((0,s.wg)(),(0,s.iD)("span",ye,(0,l.zw)(e.data.profiles[0].assignedProfileName),1)):(0,s.kq)("",!0)])])])]),e.data.profiles?((0,s.wg)(),(0,s.iD)("div",Ce,(0,l.zw)(e.data.profiles[0].assignedProfileName),1)):(0,s.kq)("",!0)],8,ge)))),128))]),0===je.length?((0,s.wg)(),(0,s.iD)("div",Pe," 無群組資料 ")):(0,s.kq)("",!0)])),_:1})])])])),_:1})):(0,s.kq)("",!0),(0,s.Wm)((0,i.SU)(y),null,{default:(0,s.w5)((()=>[(0,s._)("div",Ne,["MAIN"==ta.value?((0,s.wg)(),(0,s.iD)("div",Me,[(0,s._)("div",We,[(0,s._)("div",{class:"",style:(0,l.j5)({color:0==ia.value.length?"#d6d6d6":""})},[(0,s.Wm)(He,{icon:"fa-solid fa-folder"}),Ee],4),(0,s._)("div",{class:"ms-4",style:(0,l.j5)({color:0==ia.value.length?"#d6d6d6":""})},[(0,s.Wm)(He,{icon:"fa-solid fa-trash"}),De],4)])])):(0,s.kq)("",!0),(0,s._)("div",Ie,[(0,s.Wm)(g.Z,{ref_key:"deviceListTable",ref:na,"item-size":50,"table-props":(0,i.SU)(Qe),items:Ve.value,"key-field":"deviceId",showCheckBox:"MAIN"==ta.value,tooltipTrigger:"hover",tooltipContent:ea.value,tooltipRef:"aliasName",onHaveCheckedData:la,onNoCheckedData:m[17]||(m[17]=e=>ia.value=[]),"table-name":"deviceListTable",columnsExcept:(0,i.SU)(aa),activeTab:ta.value,customColumns:!1,filter:"UNASSIGNED"==ta.value,"filter-options":(0,i.SU)(Xe),onFilt:sa,searchShow:!1},{status:(0,s.w5)((({item:e})=>[(0,s._)("div",Ue,[(0,s._)("div",{class:(0,l.C_)(["status_dot",{err:"ERROR"===e.healthStatus,good:"GOOD"===e.healthStatus}])},null,2)])])),label:(0,s.w5)((({item:e})=>[(0,s._)("div",{class:"label",id:e.deviceId,onDblclick:a=>oa("click",e.deviceId),onTouchstartPassive:a=>ra(e.deviceId),onTouchmovePassive:ca,onTouchendPassive:ca},[(0,s._)("span",Re,(0,l.zw)(e.aliasName),1),(0,s._)("span",Te,[(0,s.Wm)(P,{modelValue:e.aliasName,"onUpdate:modelValue":a=>e.aliasName=a,onBlur:m[16]||(m[16]=e=>oa("blur")),size:"small"},null,8,["modelValue","onUpdate:modelValue"])])],40,Ge)])),enroll:(0,s.w5)((({item:e})=>[(0,s._)("div",{class:(0,l.C_)(["enrolled_status py-1 px-2",{enrolled:"REGISTERED"===e.deviceState}])},[Ae,(0,s._)("span",null,(0,l.zw)("REGISTERED"===e.deviceState?"ENROLLED":"INACTIVE"),1)],2)])),_:1},8,["table-props","items","showCheckBox","tooltipContent","columnsExcept","activeTab","filter","filter-options"])])])])),_:1})])),_:1})])])])),_:1})])),_:1})])),_:1})),[[Ca,!ya.value]])])}}};const $e=Le;var qe=$e}}]);
//# sourceMappingURL=665.340649c9.js.map