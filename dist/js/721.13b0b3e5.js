"use strict";(self["webpackChunkinefi_cli"]=self["webpackChunkinefi_cli"]||[]).push([[721],{721:function(e,l,a){a.r(l),a.d(l,{default:function(){return F}});a(560);var s=a(6252),o=a(3577),t=a(2262),i=a(9963),n=a(5781),u=a(5121),r=a(7299),c=a(1348);const d=e=>((0,s.dD)("data-v-8393eae8"),e=e(),(0,s.Cn)(),e),p={class:"groupPWA layout-content"},v={class:"search_bar p-3 ps-2 d-flex align-items-center border-b"},m={class:"layout-content search_result"},f={key:0,class:"p-4 text-center"},g={key:0,class:"list-unstyled px-2"},b=["onClick"],_={key:0,class:"d-flex align-items-center"},h={class:"me-2"},w={key:1,class:"highLight"},k={class:"quick_btn_group"},x={class:"refresh_btn p-1 active_folder mt-4"},y={class:"d-flex px-3 py-2 pe-2 border-b align-items-center bread_crumb"},C={class:"d-flex align-items-center"},G={class:"ms-3"},W=["onClick"],I={class:"px-3 py-1"},N=d((()=>(0,s._)("div",{class:"border-b d-flex flex-column mb-3"},[(0,s._)("span",{class:"ps-2 mb-3"},"Create Group"),(0,s._)("span",{class:"ps-2 mb-3"},"Add Device")],-1))),D=d((()=>(0,s._)("div",{class:"border-b d-flex flex-column mb-3"},[(0,s._)("span",{class:"ps-2 mb-3"},"Rename"),(0,s._)("span",{class:"ps-2 mb-3"},"Remove")],-1))),z=d((()=>(0,s._)("div",{class:"border-b d-flex flex-column mb-3"},[(0,s._)("span",{class:"ps-2 mb-3"},"Assign Package"),(0,s._)("span",{class:"ps-2 mb-3"},"Assign Profile"),(0,s._)("span",{class:"ps-2 mb-3"},"Assign Media")],-1))),S=d((()=>(0,s._)("div",{class:"d-flex flex-column"},[(0,s._)("span",{class:"ps-2"},"Reboot")],-1))),H={key:0,class:"d-flex ps-2 pe-3 py-2 align-items-center file_name"},q={class:"ms-2 flex-grow-1"},U={class:"layout-content"},A={class:"px-2"},V=["onClick"],L={class:"w-50 ms-3"},j=d((()=>(0,s._)("div",{class:"devide-line-v"},null,-1))),R=d((()=>(0,s._)("div",{class:"w-50"},null,-1))),E={key:0,class:"py-3 text-center"},Y=["onClick"];var K={__name:"GroupMobileView",setup(e){const l=(0,t.iH)(""),a=(0,t.iH)(""),d=(0,t.iH)(!1),K=(0,t.iH)(!0),M=(0,t.iH)(!1),P=(0,t.iH)([]);let F="/data/group_tree.json";function T(){u.Z.get(F).then((e=>{let l=e.data;P.value=[...Z(l.result)]})).catch((e=>{console.log(e)}))}function Z(e){return e.forEach((e=>{e.slaveGroupName=e.masterGroupName,e.slaveGroupUUID=e.masterGroupUUID,e.slaveGroupId=e.masterGroupId})),e}T();const B=(0,t.qj)({label:"slaveGroupName",children:"subgroup"}),$=(0,t.iH)();let J=r.Z.state.checkSlaveGroup;setTimeout((()=>{if(""!==J){let e=$.value.getNode(J.slaveGroupId);console.log("setTimeout",e),e?le(e):(0,c.z8)({message:`找不到群組${e.data.slaveGroupName}`,type:"warning"})}}),1),(0,s.YP)($,(()=>{K.value=!1})),setTimeout((()=>{P.value.forEach((e=>{let l=$.value.getNode(e.slaveGroupId);Q.push(l)}))}),2);const O=(0,t.qj)([]),Q=(0,t.qj)([]),X=(0,t.iH)([]),ee=(0,t.iH)("");function le(e){if(O.length=0,oe(),e.nodeSlaveGroupId)console.log(e.nodeSlaveGroupId),e=$.value.getNode(e.nodeSlaveGroupId),console.log(e);else if(e.device){X.value=e.device;let l=e.breadCrumb[e.breadCrumb.length-1].slaveGroupId;console.log(l),e=$.value.getNode(l)}function l(e){if(0===e.level)return;let a=e.parent;O.push(e),0===a.level?O.reverse():l(a)}function a(e){Q.length=0,e.childNodes.length&&e.childNodes.forEach((e=>{Q.push(e)})),e.data.devices&&(X.value=e.data.devices)}function s(e){0!==e.level&&(e.parent.expanded=!0,s(e.parent))}l(e),a(e),s(e),0!==e.level&&(ee.value=e.data)}const ae=(0,t.iH)([]);function se(e,s=[]){let o=[];if(Array.isArray(e)&&e.forEach((e=>{if("device"===l.value){let l={breadCrumb:[...s,e]};if(e.subgroup){const a=se(e.subgroup,l.breadCrumb);o.push(...a)}else if(e.devices){const s=e.devices.filter((e=>e.deviceName.toLowerCase().includes(a.value.toLowerCase())));if(s.length){let e=[];s.forEach((a=>{let s={breadCrumb:[]};s.breadCrumb=l.breadCrumb,s.device=a,e.push(s)})),o.push(...e)}}}else{let l={breadCrumb:[...s,e]};if(e.slaveGroupName.toLowerCase().includes(a.value.toLowerCase())&&(l.nodeSlaveGroupId=e.slaveGroupId,o.push(l)),e.subgroup){const a=se(e.subgroup,l.breadCrumb);o.push(...a)}}})),s.length>0)return o;ae.value=o}function oe(){ae.value=[],a.value="",X.value=[],ee.value=""}const te=(0,t.qj)([{title:"Status",dataIndex:"deviceState"},{title:"Device Name",dataIndex:"deviceName"},{title:"Label",dataIndex:"aliasName"},{title:"Enrolled Status",dataIndex:"deviceState"}]);return(e,u)=>{const r=(0,s.up)("font-awesome-icon"),c=(0,s.up)("el-option"),F=(0,s.up)("el-select"),T=(0,s.up)("el-input"),Z=(0,s.up)("el-breadcrumb-item"),J=(0,s.up)("el-breadcrumb"),ie=(0,s.up)("el-scrollbar"),ne=(0,s.up)("el-popover"),ue=(0,s.up)("s-table"),re=(0,s.up)("el-tree"),ce=(0,s.up)("el-drawer");return(0,s.wg)(),(0,s.iD)("div",p,[(0,s._)("div",{class:(0,o.C_)(["search_overlay layout-content",{open:M.value}])},[(0,s._)("div",v,[(0,s._)("button",{class:"me-2 px-2",onClick:u[0]||(u[0]=e=>M.value=!1)},[(0,s.Wm)(r,{icon:"fa-solid fa-chevron-left",size:"lg"})]),(0,s.Wm)(T,{modelValue:a.value,"onUpdate:modelValue":u[2]||(u[2]=e=>a.value=e),class:"w-100",size:"large",placeholder:"","prefix-icon":(0,t.SU)(n.Search),onInput:u[3]||(u[3]=e=>se(P.value)),onFocus:u[4]||(u[4]=e=>d.value=!0),onBlur:u[5]||(u[5]=e=>d.value=!1)},{prepend:(0,s.w5)((()=>[(0,s.Wm)(F,{modelValue:l.value,"onUpdate:modelValue":u[1]||(u[1]=e=>l.value=e),placeholder:"群組",style:{width:"115px"},onChange:oe},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{label:"群組",value:"group"}),(0,s.Wm)(c,{label:"裝置",value:"device"})])),_:1},8,["modelValue"])])),_:1},8,["modelValue","prefix-icon"])]),(0,s._)("div",m,[""!==a.value&&0==ae.value.length?((0,s.wg)(),(0,s.iD)("div",f," 查無資料 ")):(0,s.kq)("",!0),(0,s.Wm)(ie,null,{default:(0,s.w5)((()=>[""!==a.value&&ae.value.length>0?((0,s.wg)(),(0,s.iD)("ul",g,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(ae.value,((e,a)=>((0,s.wg)(),(0,s.iD)("li",{key:a,class:"p-3 border-b"},[(0,s._)("a",{href:"",onClick:(0,i.iM)((l=>{le(e),M.value=!1}),["prevent"])},["device"!==l.value?((0,s.wg)(),(0,s.iD)("div",_,[(0,s._)("span",h,[(0,s.Wm)(r,{icon:"fa-solid fa-folder",size:"xl"})]),(0,s.Wm)(J,{"separator-icon":(0,t.SU)(n.ArrowRight)},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.breadCrumb,(l=>((0,s.wg)(),(0,s.j4)(Z,{key:l.slaveGroupId},{default:(0,s.w5)((()=>[(0,s._)("span",{class:(0,o.C_)({highLight:l.slaveGroupId===e.nodeSlaveGroupId})},(0,o.zw)(l.slaveGroupName),3)])),_:2},1024)))),128))])),_:2},1032,["separator-icon"])])):"device"===l.value?((0,s.wg)(),(0,s.iD)("span",w,(0,o.zw)(e.device.deviceName),1)):(0,s.kq)("",!0)],8,b)])))),128))])):(0,s.kq)("",!0)])),_:1})])],2),(0,s._)("div",k,[(0,s._)("button",{onClick:u[6]||(u[6]=e=>K.value=!K.value),class:"active_folder"},[(0,s.Wm)(r,{icon:"fa-solid fa-list",size:"lg"})]),(0,s._)("button",x,[(0,s.Wm)(r,{icon:"fa-solid fa-arrows-rotate"})])]),(0,s._)("div",y,[(0,s.Wm)(ie,null,{default:(0,s.w5)((()=>[(0,s._)("div",C,[(0,s.Wm)(r,{icon:"fa-solid fa-house",size:"lg"}),(0,s._)("div",G,[(0,s.Wm)(J,{"separator-icon":(0,t.SU)(n.ArrowRight)},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(O,(e=>((0,s.wg)(),(0,s.j4)(Z,{key:`path-${e}`},{default:(0,s.w5)((()=>[(0,s._)("a",{href:"",onClick:(0,i.iM)((l=>le(e)),["prevent"])},(0,o.zw)(e.data.slaveGroupName),9,W)])),_:2},1024)))),128))])),_:1},8,["separator-icon"])])])])),_:1}),(0,s._)("button",{class:"ms-3 px-3 py-1",onClick:u[7]||(u[7]=e=>M.value=!0)},[(0,s.Wm)(r,{icon:"fa-solid fa-magnifying-glass",size:"lg"})]),(0,s.Wm)(ne,{placement:"bottom",trigger:"click"},{reference:(0,s.w5)((()=>[(0,s._)("button",I,[(0,s.Wm)(r,{icon:"fa-solid fa-ellipsis-vertical",size:"lg"})])])),default:(0,s.w5)((()=>[N,D,z,S])),_:1})]),O.length>0?((0,s.wg)(),(0,s.iD)("div",H,[""!==ee.value?((0,s.wg)(),(0,s.iD)("button",{key:0,class:"px-3 py-1",onClick:u[8]||(u[8]=e=>le(O[O.length-1].parent))},[(0,s.Wm)(r,{icon:"fa-solid fa-chevron-left"})])):(0,s.kq)("",!0),(0,s._)("span",q,(0,o.zw)(ee.value.slaveGroupName),1)])):(0,s.kq)("",!0),(0,s._)("div",U,[(0,s.Wm)(ie,{class:"d-none"},{default:(0,s.w5)((()=>[(0,s._)("div",A,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(Q,(e=>((0,s.wg)(),(0,s.iD)("div",{class:"d-flex py-3 px-2 border-b align-items-center",key:e.data.slaveGroupId,onClick:l=>le(e)},[(0,s.Wm)(r,{icon:"fa-solid fa-folder",size:"lg"}),(0,s._)("div",L,(0,o.zw)(e.data.slaveGroupName),1),j,R,(0,s.Wm)(r,{icon:"fa-solid fa-chevron-right"})],8,V)))),128)),0===Q.length?((0,s.wg)(),(0,s.iD)("p",E," 無群組資料 ")):(0,s.kq)("",!0)])])),_:1}),(0,s.Wm)(ue,{columns:te,"data-source":X.value},null,8,["columns","data-source"])]),(0,s.Wm)(ce,{modelValue:K.value,"onUpdate:modelValue":u[9]||(u[9]=e=>K.value=e),direction:"btt","show-close":!1,"with-header":!1,class:"drawer_pwa px-3","modal-class":"drawer_pwa_overlay",size:"80%"},{default:(0,s.w5)((()=>[(0,s.Wm)(ie,{"max-height":"100%"},{default:(0,s.w5)((()=>[(0,s.Wm)(re,{data:P.value,props:B,ref_key:"treeRef",ref:$,"highlight-current":!0,"expand-on-click-node":!1,"check-on-click-node":!0,"node-key":"slaveGroupId",icon:(0,t.SU)(n.ArrowRightBold)},{default:(0,s.w5)((({node:e})=>[(0,s._)("label",{class:"d-flex align-items-center w-100",onClick:l=>{le(e),K.value=!K.value}},[(0,s.wy)((0,s.Wm)(r,{icon:"fa-solid fa-folder",size:"xl"},null,512),[[i.F8,!e.expanded]]),(0,s.wy)((0,s.Wm)(r,{icon:"fa-solid fa-folder-open",size:"xl"},null,512),[[i.F8,e.expanded]]),(0,s._)("span",{class:(0,o.C_)(["ms-2",{highLight:ee.value===e.data}])},(0,o.zw)(e.label),3)],8,Y)])),_:1},8,["data","props","icon"])])),_:1})])),_:1},8,["modelValue"])])}}},M=a(3744);const P=(0,M.Z)(K,[["__scopeId","data-v-8393eae8"]]);var F=P}}]);
//# sourceMappingURL=721.13b0b3e5.js.map